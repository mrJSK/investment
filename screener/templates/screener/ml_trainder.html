<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ML Model Trainer ‚Äì ScreenerX</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: #f5f8fb;
        font-family: "Segoe UI", sans-serif;
      }

      .trainer-container {
        max-width: 820px;
        margin: 40px auto;
        padding: 25px;
        background: #fff;
        border-radius: 16px;
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.06);
      }

      .form-section {
        margin-bottom: 24px;
      }

      .form-section h5 {
        font-weight: 600;
        margin-bottom: 12px;
        color: #333;
      }

      .form-check-label {
        font-size: 0.95rem;
      }

      .train-btn {
        background-color: #6200ee;
        border: none;
        font-weight: 600;
        padding: 12px 24px;
        border-radius: 8px;
        color: white;
        transition: background 0.3s ease;
      }

      .train-btn:hover {
        background-color: #4500cb;
      }

      .form-check {
        margin-bottom: 8px;
      }

      .header-bar {
        background: #2c2f36;
        color: white;
        padding: 14px 28px;
        border-radius: 0 0 16px 16px;
        text-align: center;
        font-size: 1.25rem;
        font-weight: bold;
        letter-spacing: 1px;
      }

      .footer-note {
        text-align: center;
        font-size: 0.85rem;
        color: #999;
        margin-top: 32px;
      }
    </style>
  </head>
  <body>
    <div class="header-bar">üìä ML Model Trainer ‚Äì ScreenerX</div>

    <div class="trainer-container">
      <form id="modelTrainerForm" onsubmit="submitTraining(); return false;">
        <div class="form-section">
          <h5>üß† Select Model Type</h5>
          <select class="form-select" id="modelType">
            <option>XGBoost</option>
            <option>LightGBM</option>
            <option>Random Forest</option>
            <option>Logistic Regression</option>
          </select>
        </div>

        <div class="form-section">
          <h5>üîß Choose Features</h5>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="sma_9"
              id="feat_sma9"
              checked
            />
            <label class="form-check-label" for="feat_sma9">SMA 9</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="sma_20"
              id="feat_sma20"
              checked
            />
            <label class="form-check-label" for="feat_sma20">SMA 20</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="atr"
              id="feat_atr"
            />
            <label class="form-check-label" for="feat_atr"
              >ATR (Volatility)</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="efi"
              id="feat_efi"
            />
            <label class="form-check-label" for="feat_efi"
              >EFI (Elder Force Index)</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="z_close"
              id="feat_zclose"
            />
            <label class="form-check-label" for="feat_zclose"
              >Z-Score of Close</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="z_volume"
              id="feat_zvolume"
            />
            <label class="form-check-label" for="feat_zvolume"
              >Z-Score of Volume</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="bullish_signal_combo"
              id="feat_bullcombo"
            />
            <label class="form-check-label" for="feat_bullcombo"
              >Bullish Signal Combo</label
            >
          </div>
        </div>

        <div class="text-center">
          <button type="submit" class="train-btn">
            üöÄ Train Selected Model
          </button>
        </div>
      </form>
    </div>

    <div class="footer-note">Built with ‚ù§Ô∏è using Django + Bootstrap</div>

    <script>
      function submitTraining() {
        const model = document.getElementById("modelType").value;
        const featureElems = document.querySelectorAll(
          ".form-check-input:checked"
        );
        const features = Array.from(featureElems).map((e) => e.value);

        alert(`üß† Training ${model} model with:\n` + features.join(", "));

        // TODO: Replace with actual Django POST
        /*
      fetch("/train_model/", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ model: model, features: features })
      }).then(res => res.json())
        .then(data => alert("‚úÖ " + data.status));
      */
      }
    </script>
  </body>
</html>
