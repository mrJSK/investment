{% extends 'screener/base.html' %} {% load static %} {% block content %}
<link rel="stylesheet" href="{% static 'screener/dashboard_css.css' %}" />
<link rel="stylesheet" href="{% static 'screener/builder.css' %}" />
<div class="container-fluid" style="max-width: 1200px">
  <div class="row">
    <div class="col-lg-3 mb-3">
      <div class="sidebar bg-white rounded shadow-sm p-4">
        <h6 class="mb-3">üîç Quick Filters</h6>
        <label>Market Cap</label>
        <select class="form-select mb-2" id="marketCap">
          <option value="">All</option>
          <option value="Large Cap">Large Cap</option>
          <option value="Mid Cap">Mid Cap</option>
          <option value="Small Cap</option>
        </select>
        <label>Sector</label>
        <select class="form-select mb-2" id="sector">
          <option value="">All</option>
          <option value="IT">IT</option>
          <option value="Finance">Finance</option>
          <option value="Energy">Energy</option>
        </select>
        <label>Volume</label>
        <input
          type="range"
          class="form-range"
          min="0"
          max="100"
          value="30"
          id="volumeSlider"
        />
      </div>
    </div>
    <div class="col-lg-9">
      <div class="mb-2 small d-flex align-items-center flex-wrap">
        <span>
          Stock passes <b>all</b> of the below filters in
          <select
            id="segmentDropdown"
            class="segment-dropdown border-0 bg-transparent text-primary fw-bold"
            style="font-size: 1em"
          >
            <option value="Nifty 50">Nifty 50</option>
            <option value="Nifty 100">Nifty 100</option>
            <option value="Nifty 500">Nifty 500</option>
            <option value="All NSE">All NSE</option>
            <option value="Custom">Custom</option>
          </select>
          segment:
        </span>
        <button class="btn btn-link btn-sm text-decoration-none ms-2">
          üìã
        </button>
      </div>
      <form id="screener-form" autocomplete="off">
        <div id="filter-list"></div>
        <div class="d-flex mb-3">
          <button
            class="btn btn-outline-primary me-2"
            type="button"
            id="add-filter"
          >
            <b>+</b> Add Filter
          </button>
        </div>
      </form>
      <div class="action-bar d-flex flex-wrap mb-3 gap-2">
        <button class="btn btn-success" type="button" id="runScan">
          <span>‚ñ∂Ô∏è</span> Run Scan
        </button>
        <button class="btn btn-outline-success" type="button">
          <span>üíæ</span> Save Scan
        </button>
        <button class="btn btn-info text-white" type="button">
          <span>üìã</span> Copy Scan
        </button>
        <button class="btn btn-danger" type="button">
          <span>‚ù§Ô∏è</span> Love Scan
        </button>
        <button class="btn btn-warning" type="button">
          <span>üîî</span> Create Alert
        </button>
        <button class="btn btn-dark" type="button">
          <span>üñ•Ô∏è</span> Monitor on dashboard
        </button>
        <button
          class="btn btn-primary"
          style="background: #e100ff; border: none"
          type="button"
        >
          <span>üîÑ</span> Backtest Results
        </button>
      </div>
      <div class="card shadow-sm mb-5">
        <div
          class="card-header bg-primary text-white d-flex align-items-center justify-content-between"
        >
          <span>Screener Results</span>
          <button class="btn btn-light btn-sm" id="exportCSV">
            Export CSV
          </button>
        </div>
        <div class="card-body p-0">
          <table class="table table-hover mb-0" id="resultsTable">
            <thead>
              <tr>
                <th>#</th>
                <th>Symbol</th>
                <th>Last Price</th>
                <th>Change %</th>
                <th>Volume</th>
                <th>Matched</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="resultsBody">
              <tr>
                <td colspan="7" class="text-center py-4 text-muted">
                  No results yet.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="indicatorModal"
  tabindex="-1"
  aria-labelledby="indicatorModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Indicator or Number</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body">
        <input
          type="text"
          id="indicatorSearch"
          class="form-control mb-3"
          placeholder="Search indicator, e.g. RSI, Close, SMA..."
        />
        <ul
          class="list-group"
          id="indicatorList"
          style="max-height: 320px; overflow: auto"
        ></ul>
      </div>
    </div>
  </div>
</div>
<div
  class="modal fade"
  id="indicatorConfigModal"
  tabindex="-1"
  aria-labelledby="indicatorConfigModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="indicatorConfigModalLabel">
          Configure Indicator
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body">
        <div class="mb-2">
          <label>Timeframe:</label>
          <select id="indicatorConfigTimeframe" class="form-select">
            <option>Daily</option>
            <option>Weekly</option>
            <option>15min</option>
          </select>
        </div>
        <div class="mb-2">
          <label>Field:</label>
          <select id="indicatorConfigField" class="form-select">
            <option>Open</option>
            <option>High</option>
            <option>Low</option>
            <option>Close</option>
            <option>Volume</option>
          </select>
        </div>
        <div class="mb-2" id="indicatorConfigPeriodGroup">
          <label>Period:</label>
          <input
            type="number"
            id="indicatorConfigPeriod"
            class="form-control"
            value="20"
            min="1"
          />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="indicatorConfigDone">
          Done
        </button>
      </div>
    </div>
  </div>
</div>
<div
  class="modal fade"
  id="operatorModal"
  tabindex="-1"
  aria-labelledby="operatorModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Operation</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body">
        <ul
          class="list-group"
          id="operatorList"
          style="max-height: 320px; overflow: auto"
        ></ul>
      </div>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'screener/builder.js' %}"></script>
<script src="{% static 'screener/dashboard.js' %}"></script>
{% endblock %}